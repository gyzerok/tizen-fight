# Tizen fight API

## Handshake

Для того, чтобы добавиться в список играющих пользователей используйте событие <code>handshake</code>  

```javascript
client.emit('handshake', { username: 'Jane Doe' });
```

**Внимение!** В данный момент сервер не валидирует уникальность username.

## Обновление списка пользователей

При подключении нового пользователя, сервер рассылает всем сообщение <code>user-list</code>. Аргументом сообщения служит массив с именами всех пользователей, кроме текущего.

Например:

```javascript
['Jane Doe', 'Foo', 'Bar']
```

## Запрос на бой

Для отправки запроса на бой, клиент должен послать событие <code>fight-request</code> с именем противника на сервер.

```javascript
client.emit('fight-request', 'Jane Doe');
```

При этом, противник получит такое же событие <code>fight-request</code> с именем нападающего.

## Принятие запроса

Для того, чтобы принять запрос, нужно отправить событие <code>accept-request</code> с именем противника.

```javascript
client.emit('accept-request', 'Foo Bar');
```

После этого начинается бой, и участники начнуть получать события <code>your-health</code> и <code>enemy-health</code>.

## Изменение жизней

Во время боя приходят события <code>your-health</code> и <code>enemy-health</code>. Аргументы могут иметь значения от 0 до 100.
При создании боя оба противника получают события с аргументами 100.

## Удары

Для того, чтобы ударить противника, нужно отправить событие hit со значением от акселерометра на сервер.

```javascript
client.emit('hit', 4454.253454);
```

Одна тысяча очков с акселерометра отнимает один пункт здоровья противника.

## Окончание боя

После того, как здоровье одного из противников становится меньше 0, выигравший получает событие <code>win</code>, проигравший - событие <code>loose</code>